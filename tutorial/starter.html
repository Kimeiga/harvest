<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Harvest | Tutorials</title><meta name="description" content=""/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/harvest/_next/static/css/4d2484d658e9701ce406.css" as="style"/><link rel="stylesheet" href="/harvest/_next/static/css/4d2484d658e9701ce406.css" data-n-g=""/><link rel="preload" href="/harvest/_next/static/css/98cc8eb002987a8c32a9.css" as="style"/><link rel="stylesheet" href="/harvest/_next/static/css/98cc8eb002987a8c32a9.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/harvest/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/harvest/_next/static/chunks/webpack-5db9ef8ada7fc923c0e8.js" defer=""></script><script src="/harvest/_next/static/chunks/framework-64eb7138163e04c228e4.js" defer=""></script><script src="/harvest/_next/static/chunks/main-4ad33a7462f4aba9f4e2.js" defer=""></script><script src="/harvest/_next/static/chunks/pages/_app-11bd901130fa47f1f18f.js" defer=""></script><script src="/harvest/_next/static/chunks/779-0b961c55d26086c9f768.js" defer=""></script><script src="/harvest/_next/static/chunks/pages/tutorial/starter-bcfe5a87e259ea57196a.js" defer=""></script><script src="/harvest/_next/static/smR6EmJlaUJ4qGVonJvbf/_buildManifest.js" defer=""></script><script src="/harvest/_next/static/smR6EmJlaUJ4qGVonJvbf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Home_container__1EcsU"><nav class="Home_nav__1c1C3"><a href="/harvest/tutorial">Tutorials</a><a href="/harvest/docs">Docs</a></nav><main class="Home_main__1x8gC"><section></section><section class="Home_section__16Giz"><div class="Home_text__1sCQa"><h2>Prerequisites</h2><p>As promised, there isn&#x27;t too many prerequisites to start learning harvest. Just make sure you have the following:</p><ul><li>Python, version 3.8 or higher</li><li>A code editing software</li><li>Basic coding skills. Don&#x27;t worry, if you&#x27;ve written anything more than &#x27;Hello World&#x27;, you&#x27;re good to go</li></ul><h2>Installing</h2><p>First things first, let&#x27;s install the library. </p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-bash" style="white-space:pre"><span>pip install -e git+https://github.com/tfukaza/harvest.git</span></code></pre></div><p>Next, we install additional libraries depending on which broker you want to use. Harvest will do this automatically, using the following command:</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-bash" style="white-space:pre"><span>pip install -e git+https://github.com/tfukaza/harvest.git</span><span style="color:#888888">#egg=harvest[BROKER]</span></code></pre></div><p>Where BROKER is replaced by one of the following brokers supported by Harvest: Robinhood On MacOS&#x27;s zsh, you will need to use the following format instead:</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-bash" style="white-space:pre"><span>pip install -e </span><span style="color:#880000">&#x27;git+https://github.com/tfukaza/harvest.git#egg=harvest[BROKER]&#x27;</span></code></pre></div><h2>Example Code</h2><p>Once you have everything installed, we are ready to begin writing the code. For this example we will use Robinhood, but the code is still mostly the same if you decide to use other brokers. Before we begin, there are three components of Harvest you need to know:</p><ul><li>Trader: The main module responsible for managing the other modules.</li><li>Broker: The module that communicates with the brokerage you are using.</li><li>Algo: The module where you define your algorithm.</li></ul><p>We begin coding by import the aforementioned components, or &#x27;modules&#x27; as they are called in Python.</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span style="font-weight:bold">from</span><span> harvest.algo </span><span style="font-weight:bold">import</span><span> BaseAlgo
</span><span></span><span style="font-weight:bold">from</span><span> harvest.trader </span><span style="font-weight:bold">import</span><span> Trader
</span><span></span><span style="font-weight:bold">from</span><span> harvest.broker.robinhood </span><span style="font-weight:bold">import</span><span> RobinhoodBroker</span></code></pre></div><p>Then we create a Trader, which will be the starting point of Harvest</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span style="font-weight:bold">if</span><span> __name__ == </span><span style="color:#880000">&quot;__main__&quot;</span><span>:
</span>t = Trader( RobinhoodBroker() )
</code></pre></div><p>Few things happen here, and don&#x27;t worry, this is as complex as Harvest will get (for now). The trader class is instantiated. Traders take two Brokers as input, a streamer and a broker. streamer is the broker used to retrieve stock/cryto data. broker is the brokerage used to place orders and manage your portfolio. For this example, we initialize RobinhoodBroker. The broker automatically reads the credentials saved in secret.yaml and sets up a connection with the broker. The Robinhood broker is specified as a streamer and will be used to get stock/crypto data. If the broker is unspecified, Robinhood will also be used as a broker. Fortunately after this, things get pretty easy. We specify what stock to track, in this case Twitter (TWTR).</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span>t.add_symbol(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>)</span></code></pre></div><p>At this point, we define our algorithm. Algorithms are created by extending the BaseAlgo class.</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span class="hljs-class" style="font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#880000;font-weight:bold">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span>
</span><span>                    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span><span>                        </span><span style="font-weight:bold">pass</span><span>
</span>
<span>                    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span>
</span><span>                        </span><span style="font-weight:bold">pass</span></code></pre></div><p>every Algo must define two functions algo_init: Function called right before the algorithm starts handler: Function called at a specified interval. In this example, we create a simple algorithm that buys and sells a single stock.</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span class="hljs-class" style="font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#880000;font-weight:bold">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span>
</span><span>    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span><span>        self.hold = </span><span style="color:#78A960">False</span><span>
</span>
<span>    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span>
</span><span>        </span><span style="font-weight:bold">if</span><span> self.hold:
</span><span>            self.sell(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>, </span><span style="color:#880000">1</span><span>)
</span><span>            self.hold = </span><span style="color:#78A960">False</span><span>
</span><span>        </span><span style="font-weight:bold">else</span><span>:
</span><span>            self.buy(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>, </span><span style="color:#880000">1</span><span>)
</span><span>            self.hold = </span><span style="color:#78A960">True</span></code></pre></div><p>Finally, we tell the trader to use this algorithm, and run it. Below is the final code after putting everything together.</p><div class="rowcrop_code__1cOMl"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code class="language-python" style="white-space:pre"><span style="font-weight:bold">from</span><span> harvest.algo </span><span style="font-weight:bold">import</span><span> BaseAlgo
</span><span>                </span><span style="font-weight:bold">from</span><span> harvest.trader </span><span style="font-weight:bold">import</span><span> Trader
</span><span>                </span><span style="font-weight:bold">from</span><span> harvest.broker.robinhood </span><span style="font-weight:bold">import</span><span> RobinhoodBroker
</span>
<span>                </span><span class="hljs-class" style="font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#880000;font-weight:bold">Twitter</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseAlgo</span><span class="hljs-class">):</span><span>
</span><span>                    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">algo_init</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self</span><span class="hljs-function">):</span><span>
</span><span>                        self.hold = </span><span style="color:#78A960">False</span><span>
</span>
<span>                    </span><span class="hljs-function" style="font-weight:bold">def</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#880000;font-weight:bold">handler</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">self, meta</span><span class="hljs-function">):</span><span>
</span><span>                        </span><span style="font-weight:bold">if</span><span> self.hold:
</span><span>                            self.sell(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>, </span><span style="color:#880000">1</span><span>)    
</span><span>                            self.hold = </span><span style="color:#78A960">False</span><span>
</span><span>                        </span><span style="font-weight:bold">else</span><span>:
</span><span>                            self.buy(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>, </span><span style="color:#880000">1</span><span>)
</span><span>                            self.hold = </span><span style="color:#78A960">True</span><span>
</span>
<span>                </span><span style="font-weight:bold">if</span><span> __name__ == </span><span style="color:#880000">&quot;__main__&quot;</span><span>:
</span><span>                    t = Trader( RobinhoodBroker(), </span><span style="color:#78A960">None</span><span> )
</span><span>                    t.add_symbol(</span><span style="color:#880000">&#x27;TWTR&#x27;</span><span>)
</span>                    t.set_algo(Twitter())
<span>                    t.run(interval=</span><span style="color:#880000">&#x27;1DAY&#x27;</span><span>)</span></code></pre></div><p>By specifying interval=&#x27;1DAY&#x27; in run, the _handler will be called once every day. Now you can log into Robinhood on your phone or computer, and watch Harvest automatically buy and sell Twitter stocks! For more examples, check out the sample codes in the example folder.</p></div></section></main><footer class="Home_footer__1WdhD"></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/tutorial/starter","query":{},"buildId":"smR6EmJlaUJ4qGVonJvbf","assetPrefix":"/harvest","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>